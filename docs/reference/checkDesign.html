<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Check Datasets for Deviations From Test Design — checkDesign • eatPrep</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Check Datasets for Deviations From Test Design — checkDesign"><meta property="og:description" content="This function checks whether a data frame corresponds to a particular rotated block design, i.e. whether all persons have valid codes on all items they were presented with and one consistent missing code for all items they were not presented with."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">eatPrep</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/getting_started.html">Getting Started</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Check Datasets for Deviations From Test Design</h1>

    <div class="hidden name"><code>checkDesign.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function checks whether a data frame corresponds to a particular rotated block design, i.e. whether all persons have valid codes on all items they were presented with and one consistent missing code for all items they were not presented with.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">checkDesign</span><span class="op">(</span><span class="va">dat</span>, <span class="va">booklets</span>, <span class="va">blocks</span>, <span class="va">rotation</span>, sysMis<span class="op">=</span><span class="st">"NA"</span>, id<span class="op">=</span><span class="st">"ID"</span>,</span>
<span>    subunits <span class="op">=</span> <span class="cn">NULL</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <p></p>
<dl><dt id="arg-dat">dat<a class="anchor" aria-label="anchor" href="#arg-dat"></a></dt>
<dd><p>A data frame</p></dd>

  <dt id="arg-booklets">booklets<a class="anchor" aria-label="anchor" href="#arg-booklets"></a></dt>
<dd><p>A data frame containing information about the number of blocks in each booklet and the names of these blocks with column names 'subunit', 'block', 'subunitBlockPosition'. See ‘Examples’.</p></dd>

  <dt id="arg-blocks">blocks<a class="anchor" aria-label="anchor" href="#arg-blocks"></a></dt>
<dd><p>A data frame containing the names of subunits and their order within each block with column names 'booklet', 'block1', 'block2' ... etc. See ‘Examples’.</p></dd>

  <dt id="arg-rotation">rotation<a class="anchor" aria-label="anchor" href="#arg-rotation"></a></dt>
<dd><p>A data frame containing information about which participant worked on which booklet with column names [id as specified above], 'booklet'. See ‘Examples’.</p></dd>

   <dt id="arg-sysmis">sysMis<a class="anchor" aria-label="anchor" href="#arg-sysmis"></a></dt>
<dd><p>A character vector of length 1 indicating the missing code for items that were not administered to a participant. Default is "NA".</p></dd>

  <dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>A character vector of length 1 indicating the name of the participant identifier variable in <code>dat</code>. Default is <code>ID</code>.</p></dd>

  	<dt id="arg-subunits">subunits<a class="anchor" aria-label="anchor" href="#arg-subunits"></a></dt>
<dd><p>Optional: A data frame with subunit information (c.f. <code><a href="inputList.html">inputList</a></code>). This data frame is used to identify the names of recoded subunits.</p></dd>

	  <dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>logical. If <code>FALSE</code>, no information is printed.</p></dd>

</dl></div>
    <div id="author">
    <h2>Author</h2>
    <p>Karoline Sachse, Philipp Franikowski</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">inputDat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">inputList</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">prepDat</span> <span class="op">&lt;-</span> <span class="fu"><a href="automateDataPreparation.html">automateDataPreparation</a></span> <span class="op">(</span>inputList <span class="op">=</span> <span class="va">inputList</span>, datList <span class="op">=</span> <span class="va">inputDat</span>,</span></span>
<span class="r-in"><span>    readSpss <span class="op">=</span> <span class="cn">FALSE</span>, checkData <span class="op">=</span> <span class="cn">FALSE</span>, mergeData <span class="op">=</span> <span class="cn">TRUE</span>, recodeData <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>    aggregateData <span class="op">=</span> <span class="cn">FALSE</span>, scoreData <span class="op">=</span> <span class="cn">FALSE</span>, writeSpss <span class="op">=</span> <span class="cn">FALSE</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Starting automateDataPreparation 2024-09-10 10:40:09.089871</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Check has been skipped.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Start merging.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Start merging of dataset 1.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Start merging of dataset 2.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Start merging of dataset 3.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Start adding mbd according to data pattern.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Start recoding.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Found no recode information for variable(s): </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ID, hisei. </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> This/These variable(s) will not be recoded.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Variables... I01, I02, I03, I04, I05, I06, I07, I08, I09, I10, I11, I12a, I12b, I12c, I13, I14, I15, I16, I17, I18, I19, I20, I21, I22, I23, I24, I25, I26, I27, I28</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ...have been recoded.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> RecodeMnr has been skipped.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Aggregate has been skipped.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Scoring has been skipped.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No SPSS-File has been written.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Missings are UNcollapsed.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> automateDataPreparation terminated successfully! 2024-09-10 10:40:09.173643</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">checkDesign</span><span class="op">(</span>dat <span class="op">=</span> <span class="va">prepDat</span>, booklets <span class="op">=</span> <span class="va">inputList</span><span class="op">$</span><span class="va">booklets</span>, blocks <span class="op">=</span> <span class="va">inputList</span><span class="op">$</span><span class="va">blocks</span>,</span></span>
<span class="r-in"><span>    rotation <span class="op">=</span> <span class="va">inputList</span><span class="op">$</span><span class="va">rotation</span>, sysMis <span class="op">=</span> <span class="st">"mbd"</span>, id<span class="op">=</span><span class="st">"ID"</span>,</span></span>
<span class="r-in"><span>    subunits <span class="op">=</span> <span class="va">inputList</span><span class="op">$</span><span class="va">subunits</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Check:</span> Subunit recoding </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Use names for recoded subunits.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Check:</span> Variables in the dataset </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> The following 1 variable is not in info (`subunit` in <span style="color: #00BB00;">blocks</span>) but in dataset.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> It will be ignored during check: `hisei`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Check:</span> Valid and missing codes </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> No deviations from design detected!</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">prepDat</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">7</span>,<span class="st">"I22R"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"1"</span></span></span>
<span class="r-in"><span><span class="va">prepDat</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"I01R"</span>,<span class="st">"I02R"</span>,<span class="st">"I03R"</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"mbd"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">checkDesign</span><span class="op">(</span>dat <span class="op">=</span> <span class="va">prepDat</span>, booklets <span class="op">=</span> <span class="va">inputList</span><span class="op">$</span><span class="va">booklets</span>, blocks <span class="op">=</span> <span class="va">inputList</span><span class="op">$</span><span class="va">blocks</span>,</span></span>
<span class="r-in"><span>    rotation <span class="op">=</span> <span class="va">inputList</span><span class="op">$</span><span class="va">rotation</span>, sysMis <span class="op">=</span> <span class="st">"mbd"</span>, id<span class="op">=</span><span class="st">"ID"</span>,</span></span>
<span class="r-in"><span>    subunits <span class="op">=</span> <span class="va">inputList</span><span class="op">$</span><span class="va">subunits</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Check:</span> Subunit recoding </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Use names for recoded subunits.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Check:</span> Variables in the dataset </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> The following 1 variable is not in info (`subunit` in <span style="color: #00BB00;">blocks</span>) but in dataset.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> It will be ignored during check: `hisei`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Check:</span> Valid and missing codes </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Deviations from design detected!</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">✖</span> Found for 3 subunits sysMis instead of valid codes for booklet `booklet1`:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> I01R, I02R, and I03R</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> I01R, I02R, I03R (4 cases): person100, person101, person102, person103</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">✖</span> Found for 1 subunit valid codes instead of sysMis for booklet `booklet1`:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> I22R</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> I22R (7 cases): person100, person101, person102, person103, person104, person105, person106</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Karoline A. Sachse, Nicole Mahler, Philipp Franikowski.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer></div>






  </body></html>

